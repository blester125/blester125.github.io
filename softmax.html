<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Numberically Stable Softmax</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async
          src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
  </script>
  <script src="js/interactive.js"></script>

  <script type='text/javascript'>
    window.onload = addHoverToLines.bind(null, 'show-line-')
  </script>
  <link rel="stylesheet" type="text/css" href="css/teaching.css">

</head>
<body>
<div style="display:none">
  \[
     \newcommand{\softmax}{\mathop{\rm softmax}\nolimits}
  \]
</div>

<div class="left">
<p>
  \[
     \begin{align}
     \cssId{show-line-1}\softmax(x) &= \frac{e^{x_i}}{\sum_j e^{x_j}} \\
     \cssId{show-line-2}\softmax(x) &= \softmax(x - \alpha) \\
     \cssId{show-line-3}\alpha &= \max_i x_i
     \end{align}
  \]

  \[
     \begin{align}
     \cssId{show-line-4}\softmax(x_i) &= \frac{e^{x_i}}{\sum_j e^{x_j}} \\
     &= \cssId{show-line-5}{ \frac{e^{-\alpha}}{e^{-\alpha}} * \frac{e^{x_i}}{\sum_j e^{x_j}} }\\
     &= \cssId{show-line-6}{ \frac{e^{-\alpha}e^{x_i}}{e^{-\alpha}\sum_j e^{x_j}} }\\
     &= \cssId{show-line-7}{ \frac{e^{-\alpha}e^{x_i}}{\sum_j e^{-\alpha} e^{x_j}} }\\
     &= \cssId{show-line-8}{ \frac{e^{-\alpha + x_i}}{\sum_j e^{-\alpha + x_j}} }\\
     &= \cssId{show-line-9}{ \frac{e^{x_i -\alpha}}{\sum_j e^{x_j -\alpha}} }\\
     \end{align}
  \]

  \[
    \begin{align}
    \cssId{show-line-10}\softmax(x-\alpha) = \frac{e^{x_i - \alpha}}{\sum_j e^{x_j - \alpha}}
    \end{align}
  \]

</p>
</div>

<div class="right">

    <ul id="explain">
        <li id="explain-line-1"> Hello World! </li>
        <li id="explain-line-2"> Goodbye Cruel World! </li>
        <li id="explain-line-3"> 3 </li>
        <li id="explain-line-4"> 4 </li>
        <li id="explain-line-5"> 5 </li>
        <li id="explain-line-6"> 6 </li>
        <li id="explain-line-7"> 7 </li>
        <li id="explain-line-8"> 8 </li>
        <li id="explain-line-9"> 9 </li>
        <li id="explain-line-10"> 10 </li>
    </ul>

</div>

</body>

</html>
